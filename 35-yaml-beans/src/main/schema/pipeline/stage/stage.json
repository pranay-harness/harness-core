{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "definitions": {
        "stage": {
			"type": "object",
            "properties": {
                "type": {
                    "enum": [
                        "Deployment",
                        "Approval"
                    ]
                },
                "name": {
                    "type": "string"
                },
                "identifier": {
                    "type": "string"
                }
            },
            "if": {
                "properties": {
                    "type": {
                        "const": "Deployment"
                    }
                }
            },
            "then": {
                "properties": {
					"spec": {
						"type": "object",
						"properties": {
							"service": {
								"$ref": "/Users/rktummala/IdeaProjects/vscode-yaml/schema/pipeline/stage/service/service.json#/definitions/service"
							},
							"infrastructure": {
								"$ref": "/Users/rktummala/IdeaProjects/vscode-yaml/schema/pipeline/stage/infra/infrastructure.json#/definitions/infrastructure"
							},
							"execution": {
								"$ref": "/Users/rktummala/IdeaProjects/vscode-yaml/schema/pipeline/stage/execution/execution.json#/definitions/execution"
							}
						},
						"additionalProperties": false
					}
                }
            }
        }
    }
}