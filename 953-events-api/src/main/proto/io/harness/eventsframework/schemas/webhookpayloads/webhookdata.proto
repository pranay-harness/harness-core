syntax = "proto3";
import "product/ci/scm/proto/scm.proto";

package io.harness.eventsframework.webhookpayloads.webhookdata;

option java_multiple_files = true;
option go_package = "953_events_api";

message WebhookDTO {
  string jsonPayload = 1;
  WebhookTriggerType webhookTriggerType = 2;
  WebhookEventType webhookEventType = 3;
  product.ci.scm.proto.ParseWebhookResponse parsedResponse = 4;
  repeated EventHeader headers = 5;
  GitDetails gitDetails = 6;
  string accountId = 7;
  string eventId = 8;
  int64 time = 9;
}

message EventHeader {
  string key = 1;
  repeated string values = 2;
}

enum WebhookEventType {
  PUSH = 0;
  PR = 1;
  ISSUE_COMMENT = 2;
  CREATE_BRANCH = 3;
  DELETE_BRANCH = 4;
}

enum WebhookTriggerType {
  GIT = 0;
  CUSTOM = 1;
}

enum SourceRepoType {
  GITHUB = 0;
  GITLAB = 1;
  BITBUCKET = 2;
  AWS_CODECOMMIT = 3;
}

message GitDetails {
  SourceRepoType sourceRepoType = 1;
  WebhookEventType event = 2;
}
