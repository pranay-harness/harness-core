pipeline:
  identifier: NAME_PLACEHOLDER
  name: Integration Pipeline
  description: DESCRIPTION_PLACEHOLDER
  stages:
    - stage:
        identifier: buildharnessportal
        type: ci
        spec:
          description: This stage is run hourly to build binaries from master and upload
          infrastructure:
            type: kubernetes-direct
            spec:
              kubernetesCluster: account.ciplayground
              namespace: harness-delegate
          gitConnector:
            type: git
            identifier: account.gitportal
            spec:
              authScheme:
                type: ssh
                sshKey: git-ssh
              repo: "master"
          container:
            identifier: harnessimage
            connector: account.harnessimage
            imagePath: "harshjain12/harness_build:A"
            resources:
              limit:
                cpu: 1000
              reserve:
                cpu: 1000
          execution:
            steps:
              - step:
                  identifier: gitClone
                  type: gitClone
                  spec:
                    gitConnector: account.gitportal
                    path: portal
                    branch: master
              - step:
                  identifier: ping
                  type: run
                  spec:
                    command:
                      - sleep 10
                      - redis-cli -h cache ping
                    image: "shubham149/redis"
                    resources:
                      limit:
                        cpu: 400
                        memory: 500
          dependencies:
            - identifier: cache
              type: service
              spec:
                image: "shubham149/redis"