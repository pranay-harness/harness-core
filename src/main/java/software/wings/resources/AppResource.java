package software.wings.resources;

import javax.inject.Inject;
import javax.ws.rs.BeanParam;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.codahale.metrics.annotation.ExceptionMetered;
import com.codahale.metrics.annotation.Timed;

import software.wings.beans.Application;
import software.wings.beans.PageRequest;
import software.wings.beans.PageResponse;
import software.wings.beans.RestResponse;
import software.wings.security.annotations.AuthRule;
import software.wings.service.intfc.AppService;

/**
 *  Application Resource class
 *
 *
 * @author Rishi
 *
 */

@Path("/apps")
@AuthRule
@Produces("application/json")
@Timed
@ExceptionMetered
public class AppResource {
  private static final Logger logger = LoggerFactory.getLogger(AppResource.class);

  private AppService appService;

  @Inject
  public AppResource(AppService appService) {
    this.appService = appService;
  }

  //	@GET
  //	public RestResponse<PageResponse<Application>> list(@BeanParam PageRequest<Application> pageRequest) {
  //		return new RestResponse<>(appService.list(pageRequest));
  //	}

  @GET
  public String list() {
    return "{\"metaData\":{},\"resource\":{\"offset\":\"0\",\"start\":0,\"limit\":\"50\",\"pageSize\":50,\"filters\":[],\"orders\":[],\"fieldsIncluded\":[],\"fieldsExcluded\":[],\"response\":[{\"uuid\":\"C4FE0DF38E5E4A1AA8D8456A2E7953E6\",\"createdBy\":null,\"createdAt\":1460083138806,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083138804,\"active\":true,\"name\":\"eCommerce AppA\",\"description\":\"This is a sample application\",\"services\":[{\"uuid\":\"3D23ED45CB2E4522B24D78B40EE8C31A\",\"createdBy\":null,\"createdAt\":1460083660162,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083660162,\"active\":true,\"name\":\"Account Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"041EEA73ED594DF2AA33869DF6D71159\",\"createdBy\":null,\"createdAt\":1460096455519,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096455518,\"active\":true,\"name\":\"Catalog Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"11B60E0111DB4F128262B8A2F3CED51D\",\"createdBy\":null,\"createdAt\":1460096468958,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096468958,\"active\":true,\"name\":\"Order Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"0C5515EC984840FCA336D1174BF09134\",\"createdBy\":null,\"createdAt\":1460096500246,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096500246,\"active\":true,\"name\":\"Fulfillment Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"D7363BD5A6294F01BE9D7F449443198F\",\"createdBy\":null,\"createdAt\":1460096512298,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096512298,\"active\":true,\"name\":\"OEM Service\",\"description\":\"This is a sample service\",\"artifactType\":null}],\"environments\":[{\"uuid\":\"852E4A1399664BABBA8C47BEEB985BC8\",\"createdBy\":null,\"createdAt\":1460084089758,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460084089758,\"active\":true,\"name\":\"DEV\",\"description\":\"This is a sample environment\"},{\"uuid\":\"91B4106B92FC4711BC020362ABD5778A\",\"createdBy\":null,\"createdAt\":1460095377749,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095377748,\"active\":true,\"name\":\"PROD\",\"description\":\"This is a sample environment\"},{\"uuid\":\"7485F3446272488A9B55C83D78587B3C\",\"createdBy\":null,\"createdAt\":1460095390406,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095390406,\"active\":true,\"name\":\"UAT\",\"description\":\"This is a sample environment\"},{\"uuid\":\"61A365AB2950496E813F1EF21B5E99F6\",\"createdBy\":null,\"createdAt\":1460095397463,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095397463,\"active\":true,\"name\":\"QA\",\"description\":\"This is a sample environment\"}]},{\"uuid\":\"BDD916D9B34144D3A8D1740D9E7BD618\",\"createdBy\":null,\"createdAt\":1460083138806,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083138804,\"active\":true,\"name\":\"eCommerce AppB\",\"description\":\"This is a sample application\",\"services\":[{\"uuid\":\"3D23ED45CB2E4522B24D78B40EE8C31A\",\"createdBy\":null,\"createdAt\":1460083660162,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083660162,\"active\":true,\"name\":\"Account Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"041EEA73ED594DF2AA33869DF6D71159\",\"createdBy\":null,\"createdAt\":1460096455519,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096455518,\"active\":true,\"name\":\"Catalog Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"11B60E0111DB4F128262B8A2F3CED51D\",\"createdBy\":null,\"createdAt\":1460096468958,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096468958,\"active\":true,\"name\":\"Order Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"0C5515EC984840FCA336D1174BF09134\",\"createdBy\":null,\"createdAt\":1460096500246,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096500246,\"active\":true,\"name\":\"Fulfillment Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"D7363BD5A6294F01BE9D7F449443198F\",\"createdBy\":null,\"createdAt\":1460096512298,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096512298,\"active\":true,\"name\":\"OEM Service\",\"description\":\"This is a sample service\",\"artifactType\":null}],\"environments\":[{\"uuid\":\"852E4A1399664BABBA8C47BEEB985BC8\",\"createdBy\":null,\"createdAt\":1460084089758,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460084089758,\"active\":true,\"name\":\"DEV\",\"description\":\"This is a sample environment\"},{\"uuid\":\"91B4106B92FC4711BC020362ABD5778A\",\"createdBy\":null,\"createdAt\":1460095377749,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095377748,\"active\":true,\"name\":\"PROD\",\"description\":\"This is a sample environment\"},{\"uuid\":\"7485F3446272488A9B55C83D78587B3C\",\"createdBy\":null,\"createdAt\":1460095390406,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095390406,\"active\":true,\"name\":\"UAT\",\"description\":\"This is a sample environment\"},{\"uuid\":\"61A365AB2950496E813F1EF21B5E99F6\",\"createdBy\":null,\"createdAt\":1460095397463,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095397463,\"active\":true,\"name\":\"QA\",\"description\":\"This is a sample environment\"}]},{\"uuid\":\"38AEBBCABA4D4237B99B428C15F973D1\",\"createdBy\":null,\"createdAt\":1460083138806,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083138804,\"active\":true,\"name\":\"eCommerce AppC\",\"description\":\"This is a sample application\",\"services\":[{\"uuid\":\"3D23ED45CB2E4522B24D78B40EE8C31A\",\"createdBy\":null,\"createdAt\":1460083660162,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083660162,\"active\":true,\"name\":\"Account Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"041EEA73ED594DF2AA33869DF6D71159\",\"createdBy\":null,\"createdAt\":1460096455519,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096455518,\"active\":true,\"name\":\"Catalog Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"11B60E0111DB4F128262B8A2F3CED51D\",\"createdBy\":null,\"createdAt\":1460096468958,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096468958,\"active\":true,\"name\":\"Order Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"0C5515EC984840FCA336D1174BF09134\",\"createdBy\":null,\"createdAt\":1460096500246,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096500246,\"active\":true,\"name\":\"Fulfillment Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"D7363BD5A6294F01BE9D7F449443198F\",\"createdBy\":null,\"createdAt\":1460096512298,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096512298,\"active\":true,\"name\":\"OEM Service\",\"description\":\"This is a sample service\",\"artifactType\":null}],\"environments\":[{\"uuid\":\"852E4A1399664BABBA8C47BEEB985BC8\",\"createdBy\":null,\"createdAt\":1460084089758,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460084089758,\"active\":true,\"name\":\"DEV\",\"description\":\"This is a sample environment\"},{\"uuid\":\"91B4106B92FC4711BC020362ABD5778A\",\"createdBy\":null,\"createdAt\":1460095377749,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095377748,\"active\":true,\"name\":\"PROD\",\"description\":\"This is a sample environment\"},{\"uuid\":\"7485F3446272488A9B55C83D78587B3C\",\"createdBy\":null,\"createdAt\":1460095390406,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095390406,\"active\":true,\"name\":\"UAT\",\"description\":\"This is a sample environment\"},{\"uuid\":\"61A365AB2950496E813F1EF21B5E99F6\",\"createdBy\":null,\"createdAt\":1460095397463,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095397463,\"active\":true,\"name\":\"QA\",\"description\":\"This is a sample environment\"}]},{\"uuid\":\"A8B8D8345FC04F8CA81D224C304B4764\",\"createdBy\":null,\"createdAt\":1460083181261,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083181261,\"active\":true,\"name\":\"eCommerce AppD\",\"description\":\"This is a sample application\",\"services\":[{\"uuid\":\"3D23ED45CB2E4522B24D78B40EE8C31A\",\"createdBy\":null,\"createdAt\":1460083660162,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083660162,\"active\":true,\"name\":\"Account Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"041EEA73ED594DF2AA33869DF6D71159\",\"createdBy\":null,\"createdAt\":1460096455519,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096455518,\"active\":true,\"name\":\"Catalog Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"11B60E0111DB4F128262B8A2F3CED51D\",\"createdBy\":null,\"createdAt\":1460096468958,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096468958,\"active\":true,\"name\":\"Order Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"0C5515EC984840FCA336D1174BF09134\",\"createdBy\":null,\"createdAt\":1460096500246,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096500246,\"active\":true,\"name\":\"Fulfillment Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"D7363BD5A6294F01BE9D7F449443198F\",\"createdBy\":null,\"createdAt\":1460096512298,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096512298,\"active\":true,\"name\":\"OEM Service\",\"description\":\"This is a sample service\",\"artifactType\":null}],\"environments\":[{\"uuid\":\"852E4A1399664BABBA8C47BEEB985BC8\",\"createdBy\":null,\"createdAt\":1460084089758,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460084089758,\"active\":true,\"name\":\"DEV\",\"description\":\"This is a sample environment\"},{\"uuid\":\"91B4106B92FC4711BC020362ABD5778A\",\"createdBy\":null,\"createdAt\":1460095377749,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095377748,\"active\":true,\"name\":\"PROD\",\"description\":\"This is a sample environment\"},{\"uuid\":\"7485F3446272488A9B55C83D78587B3C\",\"createdBy\":null,\"createdAt\":1460095390406,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095390406,\"active\":true,\"name\":\"UAT\",\"description\":\"This is a sample environment\"},{\"uuid\":\"61A365AB2950496E813F1EF21B5E99F6\",\"createdBy\":null,\"createdAt\":1460095397463,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095397463,\"active\":true,\"name\":\"QA\",\"description\":\"This is a sample environment\"}]},{\"uuid\":\"C42B879C50724F5DB7813F084C7C626D\",\"createdBy\":null,\"createdAt\":1460083186201,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083186201,\"active\":true,\"name\":\"eCommerce AppE\",\"description\":\"This is a sample application\",\"services\":[{\"uuid\":\"3D23ED45CB2E4522B24D78B40EE8C31A\",\"createdBy\":null,\"createdAt\":1460083660162,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083660162,\"active\":true,\"name\":\"Account Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"041EEA73ED594DF2AA33869DF6D71159\",\"createdBy\":null,\"createdAt\":1460096455519,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096455518,\"active\":true,\"name\":\"Catalog Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"11B60E0111DB4F128262B8A2F3CED51D\",\"createdBy\":null,\"createdAt\":1460096468958,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096468958,\"active\":true,\"name\":\"Order Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"0C5515EC984840FCA336D1174BF09134\",\"createdBy\":null,\"createdAt\":1460096500246,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096500246,\"active\":true,\"name\":\"Fulfillment Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"D7363BD5A6294F01BE9D7F449443198F\",\"createdBy\":null,\"createdAt\":1460096512298,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096512298,\"active\":true,\"name\":\"OEM Service\",\"description\":\"This is a sample service\",\"artifactType\":null}],\"environments\":[{\"uuid\":\"852E4A1399664BABBA8C47BEEB985BC8\",\"createdBy\":null,\"createdAt\":1460084089758,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460084089758,\"active\":true,\"name\":\"DEV\",\"description\":\"This is a sample environment\"},{\"uuid\":\"91B4106B92FC4711BC020362ABD5778A\",\"createdBy\":null,\"createdAt\":1460095377749,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095377748,\"active\":true,\"name\":\"PROD\",\"description\":\"This is a sample environment\"},{\"uuid\":\"7485F3446272488A9B55C83D78587B3C\",\"createdBy\":null,\"createdAt\":1460095390406,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095390406,\"active\":true,\"name\":\"UAT\",\"description\":\"This is a sample environment\"},{\"uuid\":\"61A365AB2950496E813F1EF21B5E99F6\",\"createdBy\":null,\"createdAt\":1460095397463,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095397463,\"active\":true,\"name\":\"QA\",\"description\":\"This is a sample environment\"}]},{\"uuid\":\"35D856C672CE4D9291D50F68255E0186\",\"createdBy\":null,\"createdAt\":1460083190627,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083190626,\"active\":true,\"name\":\"eCommerce AppF\",\"description\":\"This is a sample application\",\"services\":[{\"uuid\":\"3D23ED45CB2E4522B24D78B40EE8C31A\",\"createdBy\":null,\"createdAt\":1460083660162,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460083660162,\"active\":true,\"name\":\"Account Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"041EEA73ED594DF2AA33869DF6D71159\",\"createdBy\":null,\"createdAt\":1460096455519,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096455518,\"active\":true,\"name\":\"Catalog Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"11B60E0111DB4F128262B8A2F3CED51D\",\"createdBy\":null,\"createdAt\":1460096468958,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096468958,\"active\":true,\"name\":\"Order Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"0C5515EC984840FCA336D1174BF09134\",\"createdBy\":null,\"createdAt\":1460096500246,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096500246,\"active\":true,\"name\":\"Fulfillment Service\",\"description\":\"This is a sample service\",\"artifactType\":null},{\"uuid\":\"D7363BD5A6294F01BE9D7F449443198F\",\"createdBy\":null,\"createdAt\":1460096512298,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460096512298,\"active\":true,\"name\":\"OEM Service\",\"description\":\"This is a sample service\",\"artifactType\":null}],\"environments\":[{\"uuid\":\"852E4A1399664BABBA8C47BEEB985BC8\",\"createdBy\":null,\"createdAt\":1460084089758,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460084089758,\"active\":true,\"name\":\"DEV\",\"description\":\"This is a sample environment\"},{\"uuid\":\"91B4106B92FC4711BC020362ABD5778A\",\"createdBy\":null,\"createdAt\":1460095377749,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095377748,\"active\":true,\"name\":\"PROD\",\"description\":\"This is a sample environment\"},{\"uuid\":\"7485F3446272488A9B55C83D78587B3C\",\"createdBy\":null,\"createdAt\":1460095390406,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095390406,\"active\":true,\"name\":\"UAT\",\"description\":\"This is a sample environment\"},{\"uuid\":\"61A365AB2950496E813F1EF21B5E99F6\",\"createdBy\":null,\"createdAt\":1460095397463,\"lastUpdatedBy\":null,\"lastUpdatedAt\":1460095397463,\"active\":true,\"name\":\"QA\",\"description\":\"This is a sample environment\"}]}],\"total\":6,\"currentPage\":1,\"or\":false},\"responseMessages\":[]}";
  }

  @POST
  public RestResponse<Application> save(Application app) {
    return new RestResponse<>(appService.save(app));
  }

  @PUT
  public RestResponse<Application> update(Application app) {
    return new RestResponse<>(appService.update(app));
  }

  @GET
  @Path("{appID}")
  public RestResponse<Application> get(@PathParam("appID") String appID) {
    return new RestResponse<>(appService.findByUUID(appID));
  }
}
